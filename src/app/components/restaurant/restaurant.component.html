<div class="browse-page">
  <div class="container">
    <!-- AI Recommendation Banner -->
    <div class="ai-banner">
      <div class="ai-banner-content">
        <div class="ai-banner-flex">
          <div class="ai-content">
            <h3>AI Recommendations for You</h3>
            <p>Based on your preferences, we think you'll love these restaurants</p>
            <button class="btn-get-picks" (click)="openChatbot()">Get Personalized Picks</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Search Bar -->
    <div class="search-container">
      <div class="search-wrapper">
        <input
          type="text"
          placeholder="Search by restaurants or dishes"
          class="search-input"
          [(ngModel)]="searchQuery"
        />
      </div>
    </div>
    <!-- Search Button -->
    <button class="btn-search" (click)="searchForItem(searchQuery)">Search</button>

    <!-- Filter Badges -->
    <div class="filter-badges">
      <span 
        *ngFor="let type of cuisineTypes" 
        class="badge" 
        [class.badge-default]="selectedCuisine === type"
        [class.badge-outline]="selectedCuisine !== type"
        (click)="filterByCuisine(type)"
      >
        {{ type }}
      </span>
    </div>

    <!-- Admin Controls moved to Restaurant Add page -->

    <!-- Restaurant Grid -->
    <div class="restaurant-grid">
      <div class="restaurant-item" *ngFor="let restaurant of restaurants">
        <a [routerLink]="['/menu', restaurant.restaurant_id]" class="restaurant-card-link">
          <div class="restaurant-card">
            <div class="restaurant-image-container">
              <img
                [src]="restaurant.imageUrl || '/GourmAI_Logo.png'"
                [alt]="restaurant.name"
                class="restaurant-image"
              />
              <span class="featured-badge" *ngIf="restaurant.featured">
                <svg class="star-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"></svg>
                AI Pick
              </span>
            </div>
            <div class="restaurant-content">
              <h3 class="restaurant-name">{{ restaurant.name }}</h3>
              <p class="restaurant-cuisine">
                {{ restaurant.cuisineType || 'Various' }}
              </p>
              <div class="restaurant-stats">
                <div class="stat-item">
                  <span class="rating-value">Rating: {{ (restaurant.rating_sum/restaurant.rating_count).toFixed(1) || 'Unrated' }} <i class="fa-star fa-solid"></i> </span>
                </div>
                <div class="stat-item muted-text">
                  <span>{{ restaurant.eta || '25-35 min' }}</span>
                </div>
              </div>
            </div>
          </div>
        </a>
        <button *ngIf="isAdmin" class="btn-delete" (click)="deleteRestaurant(restaurant.restaurant_id, $event)">Delete</button>
      </div>
    </div>
  </div>
</div>
