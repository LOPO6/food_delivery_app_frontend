<div class="chatbot-container">
  <!-- Chat Toggle Button -->
  <button class="chat-toggle-btn" (click)="toggleChat()" [class.active]="isOpen">
    <svg *ngIf="!isOpen" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="chat-icon">
      <path fill-rule="evenodd" d="M4.848 2.771A49.144 49.144 0 0112 2.25c2.43 0 4.817.178 7.152.52 1.978.292 3.348 2.024 3.348 3.97v6.02c0 1.946-1.37 3.678-3.348 3.97a48.901 48.901 0 01-3.476.383.39.39 0 00-.297.17l-2.755 4.133a.75.75 0 01-1.248 0l-2.755-4.133a.39.39 0 00-.297-.17 48.9 48.9 0 01-3.476-.384c-1.978-.29-3.348-2.024-3.348-3.97V6.741c0-1.946 1.37-3.68 3.348-3.97z" clip-rule="evenodd" />
    </svg>
    <svg *ngIf="isOpen" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="chat-icon">
      <path fill-rule="evenodd" d="M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z" clip-rule="evenodd" />
    </svg>
  </button>

  <!-- Chat Window -->
  <div class="chat-window" [class.open]="isOpen">
    <div class="chat-header">
      <div class="header-content">
        <h3>üçΩÔ∏è GourmAI Assistant</h3>
        <p>Get personalized recommendations</p>
      </div>
      <button class="close-btn" (click)="closeChat()">√ó</button>
    </div>

    <div class="chat-messages">
      <div *ngFor="let msg of messages" class="message" [class.user-message]="msg.role === 'user'" [class.assistant-message]="msg.role === 'assistant'">
        <div class="message-bubble">
          {{ msg.content }}
        </div>
      </div>
      
      <div *ngIf="isLoading" class="message assistant-message">
        <div class="message-bubble typing">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>

    <div class="chat-input-container">
      <input
        type="text"
        [(ngModel)]="userInput"
        (keypress)="handleKeyPress($event)"
        placeholder="Ask me anything..."
        class="chat-input"
        [disabled]="isLoading"
      />
      <button 
        class="send-btn" 
        (click)="sendMessage()"
        [disabled]="!userInput.trim() || isLoading"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="send-icon">
          <path d="M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z" />
        </svg>
      </button>
    </div>
  </div>
</div>
